function View(a){this.dom=null;var b;if(a){var c=a.tagName,d=a.id;b=a.style;this.dom=a.tagName?document.createElement(c):a.id?document.getElementById(d):document.createElement("div")}else this.dom=document.createElement("div");this._style=this.dom.style;b&&this.putStyle(b);this.dom.obj=this;this.dom.draggable=!1;this.dom.ondragstart=function(a){return!1};this.dom.addEventListener("contextmenu",function(a){a.preventDefault()},!1);this.putStyle({webkitUserSelect:"none",mozUserSelect:"none",msUserSelect:"none",
userSelect:"none",margin:"0",padding:"0"});this._parent=null}
View.prototype={constructor:View,putStyle:function(a){for(var b in a)this._style[b]=a[b]},getWidth:function(){return this.dom.clientWidth},getHeight:function(){return this.dom.clientHeight},setParent:function(a){this._parent=a;a.dom.appendChild(this.dom);this.onSetParent()},onSetParent:function(){},getParent:function(){return this._parent},getParentWidth:function(){return this.dom.parentNode.style.clientWidth},getParentHeight:function(){return this.dom.parentNode.style.clientHeight},updateView:function(){},
removeSelf:function(){this.dom.parentNode.removeChild(this.dom);this._parent&&this._parent.removeChild(this)},hide:function(){this._style.visibility="hidden"},show:function(){this._style.visibility="visible"},isVisible:function(){return"hidden"==this._style.visibility?!1:!0},toggleVisibility:function(){this.isVisible()?this.hide():this.show()},fullscreen:function(){var a=this.dom;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():
a.msRequestFullscreen&&a.msRequestFullscreen()}};function AbsoluteView(a){View.call(this,a);this._style.position="absolute";this._styleNameY=this._styleNameX="";if(a){var b=a.positionMode;a=a.position;b?this.setPositionMode(b):this.setPositionMode(AbsoluteView.POSITION_MODE_LEFT_TOP);a&&this.setPosition(a.x,a.y)}else this.setPositionMode(AbsoluteView.POSITION_MODE_LEFT_TOP)}AbsoluteView.prototype=Object.create(View.prototype);AbsoluteView.prototype.constructor=AbsoluteView;
AbsoluteView.prototype.setPositionMode=function(a){var b=this._style;b.left=b.right=b.top=b.bottom="";switch(a){case AbsoluteView.POSITION_MODE_LEFT_TOP:this._styleNameX=AbsoluteView.X_NAME_LEFT;this._styleNameY=AbsoluteView.Y_NAME_TOP;break;case AbsoluteView.POSITION_MODE_LEFT_BOTTOM:this._styleNameX=AbsoluteView.X_NAME_LEFT;this._styleNameY=AbsoluteView.Y_NAME_BOTTOM;break;case AbsoluteView.POSITION_MODE_RIGHT_TOP:this._styleNameX=AbsoluteView.X_NAME_RIGHT;this._styleNameY=AbsoluteView.Y_NAME_TOP;
break;case AbsoluteView.POSITION_MODE_RIGHT_BOTTOM:this._styleNameX=AbsoluteView.X_NAME_RIGHT,this._styleNameY=AbsoluteView.Y_NAME_BOTTOM}};AbsoluteView.prototype.setPosition=function(a,b){a&&(this._style[this._styleNameX]=a+"px");b&&(this._style[this._styleNameY]=b+"px")};AbsoluteView.prototype.getX=function(){var a=this._style[this._styleNameX];return""==a?0:parseInt(a)};AbsoluteView.prototype.getY=function(){var a=this._style[this._styleNameY];return""==a?0:parseInt(a)};
AbsoluteView.POSITION_MODE_LEFT_TOP=1;AbsoluteView.POSITION_MODE_LEFT_BOTTOM=2;AbsoluteView.POSITION_MODE_RIGHT_TOP=3;AbsoluteView.POSITION_MODE_RIGHT_BOTTOM=4;AbsoluteView.X_NAME_LEFT="left";AbsoluteView.X_NAME_RIGHT="right";AbsoluteView.Y_NAME_TOP="top";AbsoluteView.Y_NAME_BOTTOM="bottom";function ViewGroup(a){AbsoluteView.call(this,a);this._children=[]}ViewGroup.prototype=Object.create(AbsoluteView.prototype);ViewGroup.prototype.constructor=ViewGroup;
ViewGroup.prototype.addChild=function(a){this._children.push(a);if(a.setParent)a.setParent(this);else throw"ViewGroup added invalidate child !";};ViewGroup.prototype.removeChild=function(a){var b=-1,c;for(c in this._children)if(this._children[c]===a){b=c;break}-1!=b&&this._children.splice(b,1)};ViewGroup.prototype.updateSelf=function(){};ViewGroup.prototype.updateChildren=function(){for(var a in this._children)this._children[a].updateView()};
ViewGroup.prototype.updateView=function(){this.updateSelf();this.updateChildren()};
